<html>
  <head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="css/basic.css">
  </head>
 
  <body>

  <p></p>
  <ul>
    <li>IXB-1: 分发数据到4个MBG。
      <ul>
        <li>2x4架构：相邻2个MBG共享</li>
        <li>4x4架构：TBD。后端问题</li>
      </ul>
    </li>
    <li>IXB-2: 分发数据到MB</li>
    <li>OXB-1: 乱序读出
      <ul>
        <li>为了保证一个OXB-2输出不冲突，4个OXB-1使用TDM</li>
      </ul>
    </li>
    <li>OXB-2: 分发到MB</li>
    <li>OMUX: 读出选择</li>
  </ul>

  <ul>
      <li>OBS: 读出位序调整</li>
  </ul>


<h2>LoadBalance</h2>
分发策略为：
<ul>
  <li>核心算法：BDPA
    <ul>
      <li>按业务目的设置分发指针(目的太多，做hHash后设指针)</li>
      <li>优选分发指针指向的资源，若无法获得则尽可能选择距指针最接近的资源</li>
    </ul>
  </li>
  <li>目的优先：按目的统计缓存占用量。当缓存占用量小于配置门限时，使用目的优先算法。
     <ul>
     <li>按目的均分资源，每个资源对于一个确定的目的</li>
     <li>通过控制BDPA的期望指针在目的对应的资源之间RR来实现目的优先策略</li>
     <li>目的优先可以减少读出乱序和时延</li>
     </ul>
  </li>
  <li>均衡分发：在所以资源之间均匀分发。当缓存占用量超过目的优先门限后，开启均衡分发
    <ul>
    <li>通过控制BDPA期望指针在所有资源之间RR轮询来实现</li>
    <li>均衡分发缓存利用率高，但读出有乱序</li>
    </ul>
  </li>
  <li>最小优先：优先分发使用量最小的资源。最小优先和均衡分发配合使用。每隔N次仲裁使用一次最小优先，其它时刻使用均衡分发
    <ul>
    <li>N = 缓存空闲量 &gt;&gt; PEROID</li>
    <li>通过改变BDPA期望指针指向使用量最小的资源来实现最小优先</li>
    <li>最小优先尽可以提高缓存利用率，实现均衡分发</li>
    </ul>
  </li>
  <li>最大可能：当资源已满时，启用最大可能算法
    <ul>
      <li>屏蔽BDPA已满的资源。尽可能不丢数据</li>
    </ul>
  </li>
</ul>
  
  
  

<h2>环回仲裁</h2>
<ul>
  <li>OXB-1完成一个MBG内多个MB之间的读出冲突仲裁
    <ul>
      <li>采用Pipeline-EIAA仲裁算法</li>
    </ul>
  </li>
  <li>OXB-2分发数据到MB</li>
  <li>OXB-1到OXB-2之间无缓存，所以多个OXB-1仲裁必须保证OXB-2输出不冲突
    <ul>
      <li>多个OXB-1之间采用TDM方式选择读出总线请求</li>
      <li>IXB-1 2x4架构:</li>
      <li>IXB-1 4x4架构：</li>
    </ul>
  </li>
</ul>

<h2>Bank Selection</h2>
<ul>
  <li>Read first:写规避读
    <ul>
    <li>读出优先, 环回读其次</li>
    <li>所有Bank被分为2组：BG0(Bank Group)和BG1</li>
    <li>环回读按照BG0和BG1规避最终读出</li>
    </ul>
  </li>
  <li>环回写和写入最后。若有多个bank可选择，写入策略为：
    <ul>
      <li>每隔N次选择，采用一次最小优先。N = 缓存占用量 &gt;&gt; PERIOD</li>
      <li>其它时刻采用RR</li>
    </ul>
  </li>
</ul>




  </body>

</html>
