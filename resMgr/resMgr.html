<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  </head>
  <body>

<h1>Space Management</h1>
<p>The total space is split into three parts:</p>
<ul>
<li>Reversed Space: Each service flow just uses unique space designated to itself.
  <ul>
  <li>Do not throw flow control when reversed space is not full.</li>
  </ul>
</li>
<li>Shared Space: All service flows share all of the space. In specially, any service flow can uses the whole shared space.    
  <ul>
  <li>Dynamic threshold algorithm is applied to manage and decide the space among all services through flow control mechanism.</li>
  <li>The shared total space = M - GAP - sum(Ri) </li>
  </ul>
</li>
<li>Headroom Space: 
  <ul>
  <li>Headroom space is used to absorb the overflow of flow control and resverse the space for special serveice. The gap value is decided by RTT of flow control and basic space quantity of special service need.</li>
  <li>Multi-threshold algorithm based as various priority services is suitable to generate a flow control to manage the headroom space</li>
  <li>When (scnt+rcnt)&gt;=(M-GAP), it goes into headroom space.</li>
  </ul>
</li>
</ul>
<p>A service uses reversed space in prior. After the reversed space is full, the service uses shared space. </p>
<embed src="svg/dynTh_assoc_effect.svg"/>
<p>To shared and reversed management aim, we should locates two statistic counters to each service: </p>
<ul>
<li>A reversed counter:
  <ul>
  <li>Named with "_rcnt" postfix</li>
  <li>Counts the occupatuon in reversed space</li>
  <li>Increases count when reversed space is not full</li>
  <li>Decreases count when shared space is empty</li>
  </ul>
<li>A shared counter:</li>
  <ul>
  <li>Named with "_scnt" postfix</li>
  <li>Counts the occupatuon in shared space</li>
  <li>Increases count when reversed space is full</li>
  <li>Decreases count when shared space is not empty</li>
  </ul>
</li>
</ul>


<h1>Hierarchy Space Management</h1>
<p>In some scenarios, the total space should not distribute into the final users directly. There may be severial middle layers who is  looked like a virtual user between final users and total space. This application is called hierarchy space management.</p>
<p>For example, the total resource is shared by two user group, and each group includes some users. The total resource is distributed into these two groups firstly, then tje final users share the corresponding group space. That means the user who is belong to group #1 only uses and shares the space of group #1.</p>
<p>In hierarchy application, the sub level total space comes from parent distribution, like dynamic threshold.</p>
<img src="png/dynTh_hierachy_principle.png"/>
<p>Hierachy DTH  represents generally by:</p>
<embed src="svg/dynTh_hierachy_diagram.svg"/>

  </body>
</html>
